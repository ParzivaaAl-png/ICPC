<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Тест по Архитектуре — исправленный стабильный бар</title>
<style>
:root{
  --bg:#07101a; --panel: rgba(18,24,33,0.56);
  --accent1:#45a8ff; --accent2:#2aa1ff; --muted:#98a0b3; --text:#e6eef8;
  --card-shadow: 0 12px 30px rgba(2,6,23,0.6);
}
.light{ --bg:#f5f7fb; --panel: rgba(255,255,255,0.92); --text:#081026; --muted:#52606d; --accent1:#2979ff; --accent2:#1e66d7; }

*{box-sizing:border-box}
html,body{height:100%;margin:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial;color:var(--text);background:linear-gradient(180deg,var(--bg), #061018);-webkit-font-smoothing:antialiased}
.container{max-width:1100px;margin:28px auto;padding:18px}
.header{display:flex;align-items:center;justify-content:space-between;padding:12px;border-radius:14px;background:var(--panel);backdrop-filter:blur(8px);border:1px solid rgba(255,255,255,0.03);box-shadow:var(--card-shadow)}
.title{font-weight:800;font-size:22px}
.subtitle{color:var(--muted);font-size:13px}

.card{margin-top:16px;padding:20px;border-radius:16px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border:1px solid rgba(255,255,255,0.03);box-shadow:var(--card-shadow)}
.progress-row{display:flex;align-items:center;gap:12px;margin-bottom:16px}
.progress-small{font-size:13px;color:var(--muted);min-width:180px}
.progress-track{flex:1;height:8px;background:rgba(255,255,255,0.03);border-radius:999px;overflow:hidden}
.progress-bar{height:100%;width:0%;background:linear-gradient(90deg,var(--accent1),var(--accent2));transition:width .35s ease}
.progress-pct{width:48px;text-align:right;color:var(--muted);font-size:13px}

.question{font-size:20px;font-weight:700;margin-bottom:12px;color:var(--text)}
.options{display:flex;flex-direction:column;gap:10px}
.option{display:flex;align-items:center;gap:14px;padding:14px;border-radius:12px;background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border:1px solid rgba(255,255,255,0.04);cursor:pointer;transition:transform .16s ease,box-shadow .16s, background .16s;user-select:none}
.option:hover{transform:translateY(-6px);box-shadow:0 18px 40px rgba(2,6,23,0.55)}
.option .opt-text{flex:1;font-size:15px;color:var(--text)}
.option.selected{background:linear-gradient(90deg,var(--accent1),var(--accent2));color:#fff;border-color:transparent;box-shadow:0 12px 30px rgba(45,166,255,0.14)}
.option.correct{background:linear-gradient(90deg,#2ecc71,#1fbf5b);color:#fff}
.option.incorrect{background:linear-gradient(90deg,#ff6b6b,#ff4b4b);color:#fff}

.meta{display:flex;align-items:center;justify-content:space-between;margin-top:12px}
.feedback{padding:10px 12px;border-radius:10px;display:none;font-weight:700}
.feedback.correct{background:rgba(46,204,113,0.12);color:#2ecc71}
.feedback.incorrect{background:rgba(255,107,107,0.12);color:#ff6b6b}
.explain{margin-left:12px;color:var(--muted);display:none}

.nav{display:flex;align-items:center;gap:12px;justify-content:flex-end;margin-top:18px}
.btn{padding:10px 16px;border-radius:12px;border:none;background:var(--accent1);color:white;font-weight:700;cursor:pointer}
.btn.ghost{background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--text)}
.btn:disabled{opacity:0.45;cursor:not-allowed}
.auto-skip-toggle{display:flex;align-items:center;gap:8px;color:var(--muted);font-size:14px;cursor:pointer}
.auto-skip-toggle input{transform:scale(1.12)}

.bottom-cell { margin-top:22px; display:none; } /* hidden by default */
.bottom-cell.visible { display:block; }  /* visible when active */
.bottom-cell .track {
  width:100%; height:12px; border-radius:8px; background:rgba(255,255,255,0.03); border:1px solid rgba(255,255,255,0.03); overflow:hidden; position:relative; box-shadow: 0 8px 20px rgba(2,6,23,0.45);
}
.bottom-cell .fill { height:100%; width:0%; background: linear-gradient(90deg,var(--accent1),var(--accent2)); transition: width .05s linear; border-radius:6px; box-shadow:0 6px 16px rgba(45,166,255,0.14); }
.bottom-cell .label { margin-top:8px; text-align:right; color:var(--muted); font-size:13px; }

.results{padding:22px;text-align:center;color:var(--text);display:none}
.score{font-size:36px;font-weight:800;margin-bottom:8px}
.start-modal{position:fixed;inset:0;background:linear-gradient(rgba(3,6,10,0.6), rgba(3,6,10,0.6));display:flex;align-items:center;justify-content:center;z-index:2000}
.start-card{background:var(--panel);padding:22px;border-radius:14px;border:1px solid rgba(255,255,255,0.04);width:360px;box-shadow:var(--card-shadow)}
.mode-btn{width:100%;padding:12px;border-radius:10px;border:none;margin-bottom:10px;font-weight:700;cursor:pointer}
.mode-single{background:linear-gradient(90deg,var(--accent1),var(--accent2));color:white}
.mode-mastery{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--text)}
@media(max-width:560px){ .bottom-cell .label{display:none} .bottom-cell .track{height:10px} }
</style>
</head>
<body>
  <div class="container">
    <div class="header">
      <div>
        <div class="title">Тест по Архитектуре</div>
        <div class="subtitle">Практический тест</div>
      </div>
      <div>
        <button id="themeBtn" style="background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--text);padding:6px 10px;border-radius:999px;cursor:pointer">Тема</button>
      </div>
    </div>

    <div class="card">
      <div class="progress-row">
        <div class="progress-small" id="psmall">Вопрос 1 из N</div>
        <div class="progress-track"><div id="progressBar" class="progress-bar"></div></div>
        <div class="progress-pct" id="ppct">0%</div>
      </div>

      <div>
        <div class="question" id="qtext">Загрузка...</div>
        <div class="options" id="options"></div>

        <div class="meta">
          <div id="feedback" class="feedback"></div>
          <div id="explain" class="explain"></div>
        </div>
      </div>

      <div class="nav">
        <button id="prevBtn" class="btn ghost">Назад</button>

        <label class="auto-skip-toggle" title="Если включено — после ответа появится нижний бар и заполнится автоматически">
          <input type="checkbox" id="autoSkip" />
          <span>Автопропуск</span>
        </label>

        <button id="actionBtn" class="btn">Следующий</button>
      </div>

      <!-- отдельная ячейка внизу с баром -->
      <div class="bottom-cell" id="bottomCell" aria-hidden="true">
        <div class="track"><div class="fill" id="bottomFill"></div></div>
        <div class="label" id="bottomLabel">0%</div>
      </div>

      <div id="results" class="results">
        <h2>Тест завершён</h2>
        <div class="score" id="finalScore">0/0</div>
        <div id="resultMessage"></div>
        <div style="margin-top:14px"><button id="restartBtn" class="btn">Пройти снова</button></div>
      </div>
    </div>
  </div>

  <div class="start-modal" id="startModal">
    <div class="start-card">
      <h2>Как пройти тест?</h2>
      <p>Выберите режим: пройти один раз или Mastery (повторять неверные).</p>
      <button id="singleBtn" class="mode-btn mode-single">Пройти один раз</button>
      <button id="masteryBtn" class="mode-btn mode-mastery">Mastery — повторять неверные</button>
    </div>
  </div>


<script>
const questions = [
  {
    "question": "Which of these are desirable characteristics of a software design? Choose the three correct answers",
    "options": [
      "reusability",
      "flexible",
      "tight coupling",
      "maintainability"
    ],
    "correctAnswers": [
      0,
      1,
      3
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "You are writing out a CRC card for a bank machine component. Under which section should you put \"Track Cash Remaining.\"",
    "options": [
      "Collaborator",
      "Responsibility",
      "Class",
      "Risk"
    ],
    "correctAnswers": [
      1
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "You are writing out a CRC card for a bank machine component. Under which section should you put \"Track Cash Remaining.\"",
    "options": [
      "Collaborator",
      "Responsibility",
      "Class",
      "Risk"
    ],
    "correctAnswers": [
      1
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Which two of these are likely to be a part of conceptual design?",
    "options": [
      "Mockups",
      "Abstract data types",
      "Methods",
      "CRC Cards"
    ],
    "correctAnswers": [
      0,
      3
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "When during the design process are you likely to produce CRC cards the most?",
    "options": [
      "conceptual design",
      "after releasing the software",
      "customer meetings",
      "technical design"
    ],
    "correctAnswers": [
      0
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "An object which is responsible for showing data to the user could be considered which category of object?",
    "options": [
      "control",
      "representation",
      "boundary",
      "entity"
    ],
    "correctAnswers": [
      2
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "What is a requirement of this form called? \"As a ____, I want to ____, so that ____\".",
    "options": [
      "conceptual mockup",
      "user story",
      "entity abstraction",
      "key concept"
    ],
    "correctAnswers": [
      1
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "You are a programmer creating software for a bank machine system. Which section of a CRC card for the bank machine component will the \"User\" go into?",
    "options": [
      "Responsibility",
      "Collaborator",
      "Object",
      "Class"
    ],
    "correctAnswers": [
      1
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Some of the earliest computing languages supported:",
    "options": [
      "main program and subroutines",
      "objects and classes",
      "abstract data types",
      "local variables"
    ],
    "correctAnswers": [
      0
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Sam identified the important attributes and behaviours of a delivery driver and put them all into a DeliveryDriver class, like \"takeOrder\", \"deliverOrder\", and \"DeliveryArea.\" She exposed some of these to other classes. She just demonstrated an important part of object-oriented design. Which of these concepts best describes what you did?",
    "options": [
      "decomposition",
      "encapsulation",
      "generalization",
      "abstraction"
    ],
    "correctAnswers": [
      1
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Which keywords allow your classes to achieve polymorphism in Java? Choose the 2 correct answers",
    "options": [
      "implements",
      "interfaces",
      "inherits",
      "extends"
    ],
    "correctAnswers": [
      0,
      3
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Which is the proper way to show an abstract method in a UML class diagram?",
    "options": [
      "abstract anOperation()",
      "«anOperation()»",
      "#anOperation()",
      "anOperation()"
    ],
    "correctAnswers": [
      3
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "There are three different relationships that objects can have. Which of these best describes the relationship between a Chair and its Legs?",
    "options": [
      "association",
      "aggregation",
      "composition",
      "formation"
    ],
    "correctAnswers": [
      2
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Which is the most desirable?",
    "options": [
      "high cohesion, tight coupling",
      "low cohesion, tight coupling",
      "high cohesion, loose coupling",
      "low cohesion, loose coupling"
    ],
    "correctAnswers": [
      2
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Information Hiding is closely related to one of the core design principles of object-oriented design. Which one?",
    "options": [
      "generalization",
      "abstraction",
      "decomposition",
      "encapsulation"
    ],
    "correctAnswers": [
      3
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "During model checking, what is the name for a violation of the desired properties of the model?",
    "options": [
      "Counterexample",
      "Error",
      "Model Gap",
      "Redevelopment"
    ],
    "correctAnswers": [
      0
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "When two processes cannot run because they are waiting on the same resource, it's called…",
    "options": [
      "Deadlock",
      "Transition lock",
      "Mutual lock",
      "State lock"
    ],
    "correctAnswers": [
      0
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "You create an object that represents a user, storing important information about them such as their preferences. What kind of object is this?",
    "options": [
      "boundary",
      "entity",
      "control",
      "client"
    ],
    "correctAnswers": [
      1
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "You create an object that represents a dialog box. It creates buttons and text fields, etc, for the user to interact with, and it logs those interactions. What kind of object is this?",
    "options": [
      "entity",
      "display",
      "interaction",
      "control",
      "boundary"
    ],
    "correctAnswers": [
      4
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "You create an object that compares values from two different sources. It then updates the smaller value to be equal to the larger one. What kind of object is this?",
    "options": [
      "entity",
      "control",
      "repository",
      "update"
    ],
    "correctAnswers": [
      1
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Which of these is an example of a quality tradeoff?",
    "options": [
      "Not delivering key features so that deadlines can be met",
      "Limiting features knowing that they can be added later",
      "Adding security knowing it will reduce speed",
      "Adding preferences that allow users to switch some features on and off"
    ],
    "correctAnswers": [
      2
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "What is the term for reducing a class or object to its inputs and outputs in modelling?",
    "options": [
      "black box thinking",
      "pipe thinking",
      "process thinking",
      "filter thinking"
    ],
    "correctAnswers": [
      0
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Which one of these classes is in most need of being decomposed?",
    "options": [
      "Student",
      "Store",
      "Book",
      "Order"
    ],
    "correctAnswers": [
      1
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Which design principle enables developers to follow the guideline D.R.Y. (\"Don't Repeat Yourself\"):",
    "options": [
      "generalization",
      "decomposition",
      "abstraction",
      "encapsulation"
    ],
    "correctAnswers": [
      0
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Select the object pairing that has an association relationship:",
    "options": [
      "Hiker - Trail",
      "Coffee - Water",
      "Book - Page",
      "Tree - Root"
    ],
    "correctAnswers": [
      0
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Select the object pairing that has an aggregation relationship:",
    "options": [
      "Book - Page",
      "Pie - Crust",
      "Stapler - Staple",
      "Car - Road"
    ],
    "correctAnswers": [
      2
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Select the object pairing that has a composition relationship:",
    "options": [
      "Tea - Sugar",
      "Book - Page",
      "Record Player- Record -",
      "Bear - Forest"
    ],
    "correctAnswers": [
      1
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "How can you apply the principle of Separation of Concerns in object-oriented programming?",
    "options": [
      "Split developers into teams that each deal with different parts of the software",
      "Separate data and actions (methods) into different classes",
      "Ensure classes are only concerned with their own data",
      "Separate objects or components according to their role in the software"
    ],
    "correctAnswers": [
      3
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Which of these violates Liskov's Substitution Principle?",
    "options": [
      "the superclass is too general",
      "an operation in the superclass is replaced by a different operation in the subclass",
      "subclasses specify the abstract methods of the superclass",
      "the subclass adds behaviour"
    ],
    "correctAnswers": [
      1
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "For which of these situations would you use a sequence diagram?",
    "options": [
      "To show the collaborative behaviour of objects in your program.",
      "To show the different modes that your program can be in.",
      "To show all the different processes of your program.",
      "To show the relationship between classes"
    ],
    "correctAnswers": [
      0
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "What is an abstract data type?",
    "options": [
      "a type of data defined by the developer rather than the language",
      "a data-centric class",
      "variables that are assigned a type (i.e. integer, double) but does not yet have a value assigned",
      "a data type that cannot be used directly but must be implemented as an interface"
    ],
    "correctAnswers": [
      0
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "When is the best time to use a design pattern? Choose 2 answers.",
    "options": [
      "For a problem that is unique to your program",
      "For a commonly encountered issue",
      "When fixing spaghetti code",
      "When explaining a solution to your fellow developers"
    ],
    "correctAnswers": [
      1,
      3
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "What does it mean to \"let the subclass decide\" in the Factory Method Pattern?",
    "options": [
      "the subclass decides which object to create, but calls a method that is defined in the superclass to instantiate the class",
      "the subclass will pass a parameter into a factory that determines which object is instantiated",
      "the subclass defines the methods for concrete instantiation. As such, the type of object is determined by which subclass is instantiated"
    ],
    "correctAnswers": [
      2
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "What do we call the creation of an object, for example, with the 'new' operator in Java?",
    "options": [
      "object realization",
      "class creation",
      "concrete instantiation",
      "manifestation"
    ],
    "correctAnswers": [
      2
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Which of these is NOT a common application of the Proxy Pattern?",
    "options": [
      "information proxy",
      "virtual proxy",
      "remote proxy",
      "protection proxy"
    ],
    "correctAnswers": [
      0
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "How does a Decorator Pattern work? Choose one.",
    "options": [
      "adding features to a class with a new class",
      "expands the methods of a class with inheritance",
      "encapsulates a class to give it a different interface",
      "builds a behaviour by stacking objects"
    ],
    "correctAnswers": [
      3
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "What are the object types that are used in the Composite Pattern? Select the two correct answers.",
    "options": [
      "root",
      "trunk",
      "composite",
      "branch",
      "leaf"
    ],
    "correctAnswers": [
      2,
      4
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "What is the correct situation for the use of a Chain of Responsibility pattern?",
    "options": [
      "You need a set of objects to each contribute information on responding to a request",
      "You have multiple potential handlers, but only one will deal with the request",
      "You need to pass a message to multiple receivers",
      "You need to delegate a set of tasks to a hierarchy of objects"
    ],
    "correctAnswers": [
      1
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "What design principles is the Command Pattern using?",
    "options": [
      "Encapsulation, generalization, loose coupling",
      "Encapsulation, generalization, information hiding",
      "Encapsulation, information hiding, loose coupling",
      "Generalization, information hiding, loose coupling"
    ],
    "correctAnswers": [
      0
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "When are you most likely to need a Mediator pattern?",
    "options": [
      "When you want to de-couple a class that is requesting a service from one that is providing it",
      "When your class is sending a request that might be handled by one of several handlers.",
      "When you have two classes with different interfaces that you must connect",
      "When you are coordinating the activities of a set of related classes"
    ],
    "correctAnswers": [
      3
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Marlon is coding part of the software that follows a similar sequence of steps. Depending on the type of object, these steps will be implemented in slightly different ways, but their order is always the same. Which design pattern could Marlon use?",
    "options": [
      "Template pattern",
      "Mediator pattern",
      "Command pattern",
      "State pattern"
    ],
    "correctAnswers": [
      0
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "What are the important roles in the Command Pattern?",
    "options": [
      "Command, Queue, Receiver",
      "Command, Receiver, Invoker",
      "Sender, Receiver, Invoker",
      "Delegate, Command, Requester"
    ],
    "correctAnswers": [
      1
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "You have a machine performing a complex manufacturing task, with different sensors and different components of the machine represented by different classes. Which design pattern will you use to arrange the parts?",
    "options": [
      "Template",
      "Command",
      "Mediator",
      "Chain of Responsibility"
    ],
    "correctAnswers": [
      2
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "You have a security system class, and it has 3 modes: normal, lockdown, and open. Which pattern would you use to model the behaviour in these different modes?",
    "options": [
      "Template",
      "Mediator",
      "State",
      "Observer"
    ],
    "correctAnswers": [
      2
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "One of your classes represents a mailbox, while another is the owner of the mailbox. The person would like to know when new mail arrives. Which design pattern will you probably use?",
    "options": [
      "State",
      "Observer",
      "Command",
      "Mediator"
    ],
    "correctAnswers": [
      1
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Select the two elements of the open/closed principle:",
    "options": [
      "Open for modification",
      "Closed for extension",
      "Open for maintenance",
      "Open for extension",
      "Closed for modification"
    ],
    "correctAnswers": [
      3,
      4
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "What is the best description of the Dependency Inversion principle?",
    "options": [
      "Client objects depend on an Adaptor Pattern to interface with the rest of the system",
      "Client objects depend on generalizations instead of concrete objects",
      "Service objects subscribe to their prospective client objects as Observers, watching for a request",
      "Client objects are dependent on a service interface that directs their requests"
    ],
    "correctAnswers": [
      1
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Which of these statements is true about the Composing Objects principle?",
    "options": [
      "The first statement is true",
      "The second statement is true",
      "Neither statement is true",
      "Both statements are true"
    ],
    "correctAnswers": [
      0
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "How can Comments be considered a code smell?",
    "options": [
      "Too many comments make the files too large to compile",
      "When a comment is used to explain the rationale behind a design decision",
      "Excessive commenting can be a coverup for bad code",
      "They can’t! Comments help clarify code"
    ],
    "correctAnswers": [
      2
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "What is the primitive obsession code smell about?",
    "options": [
      "Code that contains many low-level objects, without using OO principles like aggregation or inheritance",
      "Overuse of primitive data types like int, long, float",
      "Using many different primitive types instead of settling on a few that together capture that appropriate level of detail for your system",
      "Using key-value pairs instead of abstract data types"
    ],
    "correctAnswers": [
      1
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "You have a class that you keep adding to. Whenever you add new functionality, it just seems like the most natural place to put it, but it is starting to become a problem! Which code smell is this?",
    "options": [
      "Long Method",
      "Large Class",
      "Divergent Change",
      "Speculative generality"
    ],
    "correctAnswers": [
      1
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Why is it important to avoid message chains whenever possible?",
    "options": [
      "They lower cohesion in your class",
      "The resulting code is usually rigid and complex",
      "It's a workaround to get to private methods, which are important for encapsulation",
      "If an unexpected object is returned, this could easily lead to runtime errors"
    ],
    "correctAnswers": [
      1
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Joseph was developing a class for his smartphone poker game, and decided that one day he would like to be able to change the picture on the backs of the cards, so he created a Deck superclass. Since his app does not have that feature yet, Deck has only one subclass, RegularDeck. What code smell is this?",
    "options": [
      "Divergent Change",
      "Refused Bequest",
      "Primitive Obsession",
      "Speculative Generality"
    ],
    "correctAnswers": [
      3
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Mohsin needs to create various user objects for his University learning platform. What is the act of creating an object called?",
    "options": [
      "object invocation",
      "object realization",
      "concrete instantiation",
      "class creation"
    ],
    "correctAnswers": [
      2
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "What is the difference between the Factory Method and a Simple Factory?",
    "options": [
      "In Factory Method, concrete instantiation is done in a designated method, where a Simply Factory creates objects for external clients",
      "A simple factory instantiates only one kind of object.",
      "In the factory method pattern, the factory itself must be instantiated before it starts creating objects. This is usually done with a dedicated method",
      "Simple factories cannot be subclassed"
    ],
    "correctAnswers": [
      0
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "José wants to build behaviours by stacking objects and calling their behaviours with an interface. When he makes a call on this interface, the stack of objects all perform their functions in order, and the exact combination of behaviours he needs depends what objects he stacked and in which order. Which Design Pattern best fits this need?",
    "options": [
      "Factory Method Pattern",
      "Singleton Pattern",
      "Composite Pattern",
      "Decorator Pattern"
    ],
    "correctAnswers": [
      3
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "You need to connect to a third-party library, but you think it might change later, so you want to keep the connection loosely coupled by having your object call a consistent interface. Which Design Pattern do you need?",
    "options": [
      "Proxy",
      "Facade",
      "Adapter",
      "Decorator"
    ],
    "correctAnswers": [
      2
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Which of these design principles best describes the Proxy pattern?",
    "options": [
      "encapsulation, because the Proxy hides some of the detail of the subject",
      "separation of concerns, because the Proxy object has different concerns from the subject",
      "generalization, because a proxy is a general version of the real subject",
      "decomposition, because the Proxy object has different concerns than the subject"
    ],
    "correctAnswers": [
      0
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Ashley has a method in her class that needs to makes a request. This request could be handled by one of several handlers. Which design pattern does she need?",
    "options": [
      "Facade",
      "Decorator",
      "Chain of Responsibility",
      "Template"
    ],
    "correctAnswers": [
      2
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Which of these is NOT a good use of the Command pattern?",
    "options": [
      "Sending a command to a third-party service or library",
      "Supporting undo/redo queues of commands",
      "Building a user-interface that can be used to perform operations",
      "Building macros, for example in an image manipulation program"
    ],
    "correctAnswers": [
      0
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Which code smell may become a problem with the Mediator design pattern?",
    "options": [
      "Inappropriate Intimacy",
      "Speculative Generality",
      "Refused Bequest",
      "Large Class"
    ],
    "correctAnswers": [
      3
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Which of these methods is found in a typical Observer class?",
    "options": [
      "notify()",
      "addObserver()",
      "getState()",
      "update()"
    ],
    "correctAnswers": [
      3
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "In the MVC Pattern, which of these is usually made into an Observer?",
    "options": [
      "Model",
      "Back-End",
      "View",
      "Controller"
    ],
    "correctAnswers": [
      2
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Which of these answers does NOT accurately complete the following sentence? “A class is considered closed to modification when…”",
    "options": [
      "...all the attributes and behaviours are encapsulated",
      "...its collaborators are fixed",
      "...it is tested to be functioning properly",
      "...it is proven to be stable within your system"
    ],
    "correctAnswers": [
      1
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "How does the Dependency Inversion Principle improve your software systems?",
    "options": [
      "Client classes become dependant on low-level concrete classes, rather than dependant on high-level generalizations",
      "Dependency becomes inverted by having the system depend on the client classes",
      "Client classes become dependent on high level generalizations rather than dependant on low level concrete classes",
      "Client classes use an adapter to facilitate communication between itself and the rest of the system"
    ],
    "correctAnswers": [
      2
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Allison has a search algorithm, and she would like to try a different implementation of it in her software. She tries replacing it everywhere it is used and this is a huge task! Which design principle could Allison have used to avoid this situation?",
    "options": [
      "Don't Repeat Yourself",
      "Composing Objects Principle",
      "Principle of Least Knowledge",
      "Dependency Inversion"
    ],
    "correctAnswers": [
      3
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Which object-oriented design principle do Long Message Chains, a code smell, usually violate?",
    "options": [
      "Cohesion",
      "Separation of Concerns",
      "Open/Closed Principle",
      "Principle of Least Knowledge / Law of Demeter"
    ],
    "correctAnswers": [
      3
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "What are the components of the MVC pattern?",
    "options": [
      "Model, View, Command",
      "Model, View, Controller",
      "Member, Vision, Controller",
      "Model, Vision, Command"
    ],
    "correctAnswers": [
      1
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Interface Segregation is a good way to avoid which code smell? Choose the best possible answer",
    "options": [
      "Switch Statements",
      "Refused Bequest",
      "Divergent Change",
      "Long Method"
    ],
    "correctAnswers": [
      1
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Read the following statements. Which of them are true?",
    "options": [
      "Both statements are true",
      "Only the first statement is true",
      "Neither statement is true",
      "Only the second statement is true"
    ],
    "correctAnswers": [
      0
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Which of these UML diagrams might be useful for the logical view of a system? Select the 2 correct answers",
    "options": [
      "Deployment diagram",
      "Class diagram",
      "Sequence diagram",
      "State diagram"
    ],
    "correctAnswers": [
      1,
      3
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "You need to show how your software elements are mapped to hardware nodes and execution environments. Which view do you need?",
    "options": [
      "development view",
      "physical view",
      "scenario",
      "process view"
    ],
    "correctAnswers": [
      1
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "What is the name for a physical result of the development process, such as an executable file?",
    "options": [
      "package",
      "leaf",
      "artifact",
      "node"
    ],
    "correctAnswers": [
      2
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Which of these sets of keywords might be used on the lines in package diagrams?",
    "options": [
      "deploy, merge, include",
      "request, import, merge",
      "interface, export, load",
      "merge, access, import"
    ],
    "correctAnswers": [
      3
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Which of these is NOT shown on an activity diagram?",
    "options": [
      "activities",
      "interfaces",
      "decisions",
      "concurrency"
    ],
    "correctAnswers": [
      1
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "What does the component of ‘component diagram’ refer to?",
    "options": [
      "the basic parts of the software, which it could not run without",
      "an independent, encapsulated unit in the system",
      "an external part of the software system, like a library that must be imported",
      "a general name for a \"part\" of the software system. It could be a method, variable, class, object, or grouping of any of these"
    ],
    "correctAnswers": [
      1
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Guidelines such as \"the system should be easy and intuitive to learn\", \"the system should minimize user errors,\" and \"the system should make it easy for users to complete tasks\" fall under which category of quality attribute?",
    "options": [
      "usability",
      "intuitiveness",
      "astonishment",
      "complexity"
    ],
    "correctAnswers": [
      0
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Calum is leading a team of developers and would like to promote conceptual integrity. Which of these is NOT a way he could promote conceptual integrity:",
    "options": [
      "Split the development team into subteams for each component of the architecture",
      "Do regular code reviews with the development team",
      "Establish conventions, such as structural rules or naming conventions",
      "Adopt good documentation practices"
    ],
    "correctAnswers": [
      0
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Who are the three main groups of people involved in the architecture tradeoff analysis method?",
    "options": [
      "clients, designers, stakeholders",
      "peers, outsiders, designers",
      "evaluation team, outsiders, project team",
      "evaluation team, project decision makers, architecture stakeholders"
    ],
    "correctAnswers": [
      3
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Leon is analyzing the architecture and notices that under conditions of high numbers of users signing on at the same time, there is a potential that one of the architecturally significant requirements (ASRs) will not be met. What is this called?",
    "options": [
      "tradeoff",
      "risk scenario",
      "utility shortfall",
      "non-risk scenario"
    ],
    "correctAnswers": [
      1
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Maddie's software team is split into two subteams working on two different components that work together. These teams share one large room and are in constant contact. According to Conway's Law, what could happen if Maddie does not physically separate the two subteams?",
    "options": [
      "The component interfaces will not be reusable",
      "They will not leave sufficient comments, thinking that the other team already knows the relevant details",
      "Their components will repeat code unnecessarily",
      "The components they produce will be very tightly coupled"
    ],
    "correctAnswers": [
      3
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Which of these is NOT a typical advantage of developing a product line?",
    "options": [
      "greatly reduced up-front development",
      "overall cost reduction",
      "consistency over the product line",
      "reducing time-to-market of later products"
    ],
    "correctAnswers": [
      0
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Andy is planning the development of a product line of eBook readers and he has to categorize the components that will be handled by each team. There is one product in the line which has a backlight for reading during the night. In the development process, where would you categorize this feature?",
    "options": [
      "Product-Specific",
      "Commonality",
      "Variation",
      "One-Off"
    ],
    "correctAnswers": [
      0
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Which of these views show the functional design of the software, usually in the form of objects and the relationships between them?",
    "options": [
      "physical view",
      "process view",
      "development view",
      "logical view"
    ],
    "correctAnswers": [
      3
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "To which view would the Package Diagram belong? Remember that a package diagram shows the packages that make up a software and how they are related.",
    "options": [
      "process view",
      "logical view",
      "development view",
      "physical view"
    ],
    "correctAnswers": [
      2
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Which of these statements about Component Diagrams is true?",
    "options": [
      "They are useful for clarifying the artifacts that will be produced from development",
      "They clarify dependency relationships",
      "They give a dynamic view of the system",
      "They do not show third-party libraries"
    ],
    "correctAnswers": [
      1
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Which of these will you NOT find in a deployment diagram?",
    "options": [
      "component",
      "device",
      "class",
      "artifact",
      "library"
    ],
    "correctAnswers": [
      2
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "What is an artifact?",
    "options": [
      "A physical realization of a software component",
      "A part of a device that is nonetheless important to depict on the deployment diagram, like a hard drive",
      "An unintended effect that the software has on the device.",
      "Part of the development process that is important to the developers, but not the end- users"
    ],
    "correctAnswers": [
      0
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "What is an abstract data type?",
    "options": [
      "a data schema that is defined by the developer",
      "a data type that dynamically allows the storage of different primitives",
      "an interface that defines how to store data in a class",
      "a data type that is not actually storing data; instead, it is used to define interfaces"
    ],
    "correctAnswers": [
      3
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Select the one accurate statement about layered architecture:",
    "options": [
      "Passthrough should be avoided at all costs",
      "Enforcing communication only between adjacent layers and within a layer is key to good, layered architecture",
      "Upper layers act as service providers to lower layers",
      "Layered architecture is often based on layers of abstraction"
    ],
    "correctAnswers": [
      3
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "What is the correct term for a machine that hosts a server?",
    "options": [
      "server-tier",
      "Called by type: e.g. print server or media server",
      "server-host",
      "server-machine"
    ],
    "correctAnswers": [
      2
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Some programs allow users to record a sequence of inputs - for example keyboard and mouse inputs - to run later. What are these called?",
    "options": [
      "user recorders",
      "scripts",
      "macros",
      "input listeners"
    ],
    "correctAnswers": [
      2
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Data Flow Architecture is also called...",
    "options": [
      "Data Transformation Architecture",
      "Pipe and Filter Architecture",
      "Cascade Architecture",
      "Black Box Architecture"
    ],
    "correctAnswers": [
      1
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Which of these is NOT a common component of event-driven architectures?",
    "options": [
      "event generator",
      "event processor",
      "event consumer",
      "event bus"
    ],
    "correctAnswers": [
      1
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "1Which type of process control that we discussed is typically needed for complex systems?",
    "options": [
      "Feedforward Control + Feedback Control",
      "Feedforward Control",
      "MAPE-K",
      "Machine Learning"
    ],
    "correctAnswers": [
      2
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Which of these is a drawback of n-Tier architecture?",
    "options": [
      "Every tier demands extra resources to manage the client/server relationships",
      "More hardware nodes are necessary",
      "Only asynchronous messaging is possible, leading to challenging development decisions",
      "Limited in scale"
    ],
    "correctAnswers": [
      0
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Which of these is NOT an example of Interpreter type architecture?",
    "options": [
      "Excel formulas",
      "Java Virtual Machine",
      "Scripting and Macros",
      "The kernel of an operating system"
    ],
    "correctAnswers": [
      3
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Which of these terms matches this definition: “The amount of time the system is operational over a set period of time?”",
    "options": [
      "availability",
      "interoperability",
      "usability",
      "performance"
    ],
    "correctAnswers": [
      0
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Which of these quality attributes is most important from the developer's perspective?",
    "options": [
      "availability",
      "security",
      "usability",
      "flexibility"
    ],
    "correctAnswers": [
      3
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "General quality attributes like performance and security have more specific components like throughput and latency for performance. What are these called?",
    "options": [
      "architecturally significant requirements",
      "sensitivity points",
      "attribute refinement",
      "architecture specifications"
    ],
    "correctAnswers": [
      2
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Which strategy is NOT part of delivering a high-quality system?",
    "options": [
      "Treat all quality attributes as equally important",
      "Involve all stakeholders in design",
      "Adopt good documentation practices",
      "Set rules for design and implementation"
    ],
    "correctAnswers": [
      0
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "True or False: You should focus on situations that are outside the normal execution path when building a quality attribute scenario.",
    "options": [
      "True",
      "False"
    ],
    "correctAnswers": [
      0
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "\"Maintenance Downtime\" is an attribute refinement of what quality attribute?",
    "options": [
      "Performance",
      "Conceptual Integrity",
      "Maintainability",
      "Availability"
    ],
    "correctAnswers": [
      3
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Eliza is planning a product line of media boxes. Some of these will connect to traditional television lines, whereas others will only have internet media like video-streaming services. What is this type of difference between products called?",
    "options": [
      "Extension",
      "Variation",
      "Product-Specifics",
      "Adaptation"
    ],
    "correctAnswers": [
      1
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Mozilla Firefox and other browsers have ecosystems of add-ons for their browsers that add functionality, for example by blocking ads or providing tools for online shopping. What is this style of variation called?",
    "options": [
      "Adaptation",
      "Extension",
      "Reference Architecture",
      "Replacement"
    ],
    "correctAnswers": [
      1
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "You are probably using the internet to do some of your personal banking. There is a page that shows your accounts and their balances, often called something like \"Account Summary\" or \"Account Overview.\" You must click on an account to begin managing it. Which type of web page is this?",
    "options": [
      "dynamic web page",
      "web app",
      "web service",
      "static web page"
    ],
    "correctAnswers": [
      0
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Another web page allows interacting with a spreadsheet in a browser. You can enter in values, sum them up, perform operations on them, format them, etc. What type of web page is this?",
    "options": [
      "static web page",
      "dynamic web page",
      "web app",
      "web service"
    ],
    "correctAnswers": [
      2
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Consider the two statements. Choose the one correct option.",
    "options": [
      "Only the first statement is correct",
      "Both statements are correct",
      "Neither statement is correct",
      "Only the second statement is correct"
    ],
    "correctAnswers": [
      3
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Which of these is NOT a basic standard of the World Wide Web?",
    "options": [
      "TCP",
      "HTTP",
      "FTP",
      "URL"
    ],
    "correctAnswers": [
      2
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "There is an HTTP method that allows you to send, create or update a resource, but allows the server to decide its location and identity. Which HTTP method is this?",
    "options": [
      "PUT",
      "GET",
      "POST",
      "SEND"
    ],
    "correctAnswers": [
      2
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Which of these is often used to add dynamic content to a web page?",
    "options": [
      "CSS",
      "Javascript",
      "HTML DOM",
      "HTML"
    ],
    "correctAnswers": [
      1
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "What are the three high-level components involved in a remote procedural call?",
    "options": [
      "marshal, client, server",
      "client stub, compiler, server stub",
      "IDL source code, IDL compiler, interface headers",
      "client, server, interface definition language"
    ],
    "correctAnswers": [
      3
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "The process of establishing a connection between the client stub and server stub is called…",
    "options": [
      "binding",
      "marshalling",
      "interfacing",
      "handshaking"
    ],
    "correctAnswers": [
      0
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "What are the advantages of Common Object Request Broker Architecture (CORBA)? Choose the 2 correct answers.",
    "options": [
      "Objects are essentially independent of their physical or virtual location.",
      "It allows for object-oriented paradigms in distributed computing",
      "Dynamic binding is simple",
      "Method calls can be treated locally or remotely"
    ],
    "correctAnswers": [
      0,
      1
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "What is the main difference between a web service and a web application?",
    "options": [
      "Web applications are presented through a browser",
      "Web services are simpler",
      "Web services are mostly meant for business applications",
      "Web applications dynamically generate content"
    ],
    "correctAnswers": [
      0
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "What standard is used for all aspects of web service development in this module, from describing interfaces to publishing and discovering services?",
    "options": [
      "XML",
      "WSDL",
      "SOAP",
      "UDDI"
    ],
    "correctAnswers": [
      3
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Your web browser has an add-on that is alerted when your favourite blog has a new post. Which messaging pattern is this?",
    "options": [
      "notification",
      "request-response",
      "one-way",
      "solicit-response"
    ],
    "correctAnswers": [
      0
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "An important part of a WSDL (Web Service Description Language) file is a section that describes how services are invoked. For example, this section includes the style of interaction (document or RPC), the transport protocol, and how messages are turned into XML. What is this section?",
    "options": [
      "services",
      "bindings",
      "interfaces",
      "types"
    ],
    "correctAnswers": [
      1
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "WS-BPEL covers what aspect of web services?",
    "options": [
      "encryption",
      "publishing",
      "composition",
      "security"
    ],
    "correctAnswers": [
      2
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Which part of a WSDL 2.0 description gives concrete information about the ports to be used for the service?",
    "options": [
      "bindings",
      "portTypes",
      "services",
      "interfaces"
    ],
    "correctAnswers": [
      2
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "According to REST best practices, where should you specify what format the input and output messages are in?",
    "options": [
      "Parameters in the URI",
      "XML schema",
      "HTTP headers",
      "sub-resources in the URI"
    ],
    "correctAnswers": [
      2
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Which of these is NOT used in developing RESTful web services?",
    "options": [
      "simple text",
      "JSON",
      "XML",
      "SOAP"
    ],
    "correctAnswers": [
      3
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "By convention, which HTML method is usually used to create a new resource?",
    "options": [
      "POST",
      "DELETE",
      "PATCH",
      "PUT"
    ],
    "correctAnswers": [
      0
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "What is the recommended way to not break functionality if your RESTful API is being used by many users?",
    "options": [
      "Refactor the service, keeping the API the same",
      "version your API",
      "Describe your service with WSDL",
      "Subscribe your service consumers to change notifications"
    ],
    "correctAnswers": [
      1
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Which of these best describes microservices?",
    "options": [
      "Migrating business functionality into a set of services incrementally instead of all at once",
      "Web service architectures consisting of lots of small, modular services",
      "a variation of SOA applied on an application scale",
      "Replicating services and modifying them to fill other roles"
    ],
    "correctAnswers": [
      2
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Consider the two statements. Choose the one correct option.",
    "options": [
      "Only the first statement is true",
      "Only the second statement is true",
      "Both statements are true",
      "Neither statement is true"
    ],
    "correctAnswers": [
      1
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Which of these examples is a web application?",
    "options": [
      "an online shopping platform",
      "a website conducting a survey",
      "a blog",
      "online poker"
    ],
    "correctAnswers": [
      3
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "What is the term for the action that converts the parameters into a standardized message on the client side?",
    "options": [
      "invocation",
      "binding",
      "marshalling",
      "blocking"
    ],
    "correctAnswers": [
      2
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "In what format are SOAP messages represented?",
    "options": [
      "JSON",
      "SOAP formatting is not based on any other format",
      "XML",
      "HTML"
    ],
    "correctAnswers": [
      2
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Which part of a SOAP message can be included but is NOT required?",
    "options": [
      "header",
      "envelope",
      "body",
      "HTTP method"
    ],
    "correctAnswers": [
      0
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "True or False: a SOAP message must be sent over HTTP.",
    "options": [
      "True",
      "False"
    ],
    "correctAnswers": [
      1
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Which type of description will a service requester need to bind to a web service?",
    "options": [
      "SOAP",
      "UDDI",
      "WS-Description",
      "WSDL"
    ],
    "correctAnswers": [
      3
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Which section of WSDL 2.0 contains concrete information like physical ports and mapping interfaces to endpoints?",
    "options": [
      "bindings",
      "services",
      "portTypes",
      "interfaces"
    ],
    "correctAnswers": [
      1
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "What does the types section of a WSDL 2.0 document allow developers to do?",
    "options": [
      "Define abstract data types",
      "Specify document-style or RPC-style interaction",
      "Specify which communications protocol is used (HTTP, SMTP…)",
      "Specifies the type of interaction (request-response, solicit-response…)"
    ],
    "correctAnswers": [
      0
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "In which section of a UDDI description will you find information like the category of business and service?",
    "options": [
      "blue pages",
      "green pages",
      "yellow pages",
      "white pages"
    ],
    "correctAnswers": [
      2
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Under which data structure of UDDI will you find a reference to the WSDL description?",
    "options": [
      "businessEntity",
      "serviceInterface",
      "businessService",
      "tModel"
    ],
    "correctAnswers": [
      3
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "What is the difference between coordination and composition in the context of services?",
    "options": [
      "coordination can only be done in a synchronous way",
      "composition uses only objects",
      "composition exposes a combination of services as another service",
      "coordination is focused on pairwise interactions"
    ],
    "correctAnswers": [
      2
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "What does it mean that RESTful services are cacheable?",
    "options": [
      "the service logic can be stored on the client",
      "the server can store the state of the interaction",
      "the client can store a version of the server's response",
      "the server can queue and prioritize requests"
    ],
    "correctAnswers": [
      2
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Which of these is a good name for a REST resource? In other words, which of these resource names follow best practices? Choose the 2 correct answers.",
    "options": [
      "/getCar/2",
      "/car/2",
      "/cars/2",
      "/cars/2/tires"
    ],
    "correctAnswers": [
      2,
      3
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Which of these elements in the HTTP header of a request specifies the format of the response?",
    "options": [
      "Host",
      "Content-Encoding:",
      "Accept:",
      "Content-Type:"
    ],
    "correctAnswers": [
      2
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "What is the most important difference between WS*-style web services (which utilize SOAP, WSDL, etc.) and RESTful web services?",
    "options": [
      "WS* are more secure",
      "RESTful services are simpler",
      "Their differences are very minor",
      "They do not use the same transfer protocol"
    ],
    "correctAnswers": [
      1
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Where are the formats of the input and output data specified, according to REST best practices?",
    "options": [
      "In the HTTP header",
      "As parameters in the URL",
      "In the HTTP request in JSON format",
      "In the HTTP request in XML format"
    ],
    "correctAnswers": [
      0
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Consider the following two statements about microservices architecture. Choose the one correct option",
    "options": [
      "Only the first statement is true.",
      "Only the second statement is true",
      "Both statements are true",
      "Neither statement is true"
    ],
    "correctAnswers": [
      2
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Which of these formats can be used to express and structure content to be sent over the internet? Choose the 3 correct answers:",
    "options": [
      "CSS",
      "XML",
      "JSON",
      "HTML"
    ],
    "correctAnswers": [
      1,
      2,
      3
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Consider the following two statements about Javascript. Choose the one correct option.",
    "options": [
      "Only the first statement is true",
      "Only the second statement is true",
      "Both statements are true",
      "Neither statement is true"
    ],
    "correctAnswers": [
      0
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Which of these responsibilities does the client stub have in a middleware-based architecture that uses RPC? Choose the 2 correct answers.",
    "options": [
      "Invoking the remote procedure call over the network",
      "Establishing a connection with the server",
      "Formatting and encoding data into standardized messages",
      "Invoking the server application directly"
    ],
    "correctAnswers": [
      0,
      2
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Which of these are acceptable REST URIs according to best practices? Choose the 2 correct answers.",
    "options": [
      "/students/",
      "/students/3/",
      "/student/",
      "/getstudent/"
    ],
    "correctAnswers": [
      0,
      1
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "How can you pass parameters in a REST call?",
    "options": [
      "In the HTTP header",
      "In the URL",
      "In XML",
      "In the SOAP header"
    ],
    "correctAnswers": [
      1
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Which of these message patterns are typical of asynchronous messaging?",
    "options": [
      "request-response",
      "solicit-response",
      "one-way",
      "notification"
    ],
    "correctAnswers": [
      2
    ],
    "explanation": "",
    "theme": ""
  },
  {
    "question": "Consider the two statements. Choose the one correct option",
    "options": [
      "Only the first statement is true",
      "Only the second statement is true",
      "Both statements are true",
      "Neither statement is true"
    ],
    "correctAnswers": [
      3
    ],
    "explanation": "",
    "theme": ""
  }
];

/* ====== HELPERS ====== */
function shuffleInPlace(a){ for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]];} return a; }
function shuffled(a){ return shuffleInPlace(a.slice()); }
function isMulti(q){ return Array.isArray(q.correctAnswers) && q.correctAnswers.length > 1; }

/* ====== ELEMENTS ====== */
const qtext = document.getElementById('qtext');
const optionsEl = document.getElementById('options');
const prevBtn = document.getElementById('prevBtn');
const actionBtn = document.getElementById('actionBtn');
const progressBar = document.getElementById('progressBar');
const psmall = document.getElementById('psmall');
const ppct = document.getElementById('ppct');
const feedbackEl = document.getElementById('feedback');
const explainEl = document.getElementById('explain');
const resultsEl = document.getElementById('results');
const finalScore = document.getElementById('finalScore');
const resultMessage = document.getElementById('resultMessage');
const startModal = document.getElementById('startModal');
const singleBtn = document.getElementById('singleBtn');
const masteryBtn = document.getElementById('masteryBtn');
const autoSkipEl = document.getElementById('autoSkip');
const bottomCell = document.getElementById('bottomCell');
const bottomFill = document.getElementById('bottomFill');
const bottomLabel = document.getElementById('bottomLabel');
const restartBtn = document.getElementById('restartBtn');
const themeBtn = document.getElementById('themeBtn');

/* ====== STATE ====== */
let mode = 'single';
let order = [];
let currentIndex = 0;
let score = 0;
let answered = false;
let userSelections = {};

/* bottom state */
let bottomAnim = null;
let bottomStart = null;
let bottomDuration = 0;
let bottomActive = false; // true while filling

/* hide bottom initially */
if (bottomCell) { bottomCell.style.display = 'none'; bottomCell.classList.remove('visible'); }

/* ====== BOTTOM FILL (robust) ====== */
function startBottomFill(ms){
  if (!autoSkipEl || !autoSkipEl.checked) return; // doh
  // if already active, don't restart
  if (bottomActive) return;
  bottomActive = true;
  bottomDuration = ms;
  bottomStart = null;
  bottomFill.style.width = '0%';
  bottomLabel.textContent = '0%';
  bottomCell.style.display = 'block';
  bottomCell.classList.add('visible');

  function step(ts){
    if (!bottomStart) bottomStart = ts;
    const elapsed = ts - bottomStart;
    const pct = Math.min(1, elapsed / bottomDuration);
    const pctInt = Math.round(pct * 100);
    bottomFill.style.width = pctInt + '%';
    bottomLabel.textContent = pctInt + '%';
    if (pct < 1){
      bottomAnim = requestAnimationFrame(step);
    } else {
      bottomAnim = null;
      bottomActive = false;
      // only auto-advance if autoprogress still enabled
      if (autoSkipEl && autoSkipEl.checked){
        // advance automatically
        proceedToNext(true);
      } else {
        // autoprogress was turned off during fill — keep the bar filled until user clicks or it is hidden by toggle handler
      }
    }
  }
  bottomAnim = requestAnimationFrame(step);
}

function stopBottomFill(){
  if (bottomAnim){ cancelAnimationFrame(bottomAnim); bottomAnim = null; }
  bottomStart = null;
  bottomDuration = 0;
  bottomActive = false;
  bottomCell.classList.remove('visible');
  // hide after tiny timeout to allow CSS transitions
  clearTimeout(bottomCell._hideTimeout);
  bottomCell._hideTimeout = setTimeout(()=>{
    bottomCell.style.display = 'none';
    bottomFill.style.width = '0%';
    bottomLabel.textContent = '0%';
  }, 160);
}

function cancelBottomIfRunning(){
  // manual cancel hides immediately
  stopBottomFill();
}

/* ====== SESSION & RENDER ====== */
function startSession(selectedMode){
  mode = selectedMode;
  if (startModal) startModal.style.display = 'none';
  order = shuffled(Array.from({length: questions.length}, (_,i)=>i));
  currentIndex = 0;
  score = 0;
  answered = false;
  userSelections = {};
  renderCurrent();
}

function renderCurrent(){
  if (currentIndex >= order.length){ showResults(); return; }
  const qidx = order[currentIndex];
  const q = questions[qidx];

  answered = false;
  feedbackEl.style.display = 'none';
  explainEl.style.display = 'none';
  optionsEl.innerHTML = '';
  actionBtn.disabled = true;

  // top progress
  psmall.textContent = `Вопрос ${currentIndex+1} из ${order.length}`;
  const pct = Math.round(((currentIndex+1)/order.length)*100);
  progressBar.style.width = pct + '%';
  ppct.textContent = pct + '%';

  qtext.textContent = q ? q.question : 'Вопросов нет';
  if (!q) { optionsEl.innerHTML = '<div style="color:var(--muted);padding:12px;border-radius:8px;background:rgba(255,255,255,0.02)">Добавьте вопросы в массив <code>questions</code>.</div>'; prevBtn.disabled=true; actionBtn.disabled=true; return; }

  const multi = isMulti(q);
  let pairs = q.options.map((t,i)=>({t,orig:i}));
  shuffleInPlace(pairs);

  pairs.forEach(pair=>{
    const label = document.createElement('label');
    label.className = 'option';
    const input = document.createElement('input');
    input.type = multi ? 'checkbox' : 'radio';
    input.name = 'opt'+qidx;
    input.dataset.orig = String(pair.orig);
    const span = document.createElement('span'); span.className='opt-text'; span.textContent = pair.t;
    label.appendChild(input); label.appendChild(span);
    optionsEl.appendChild(label);

    if (!multi){
      label.addEventListener('click', ()=>{
        if (answered) return;
        const chosen = Number(input.dataset.orig);
        userSelections[qidx] = [chosen];
        evaluateSingle(qidx, chosen);
      });
    }
  });

  if (multi){
    actionBtn.textContent = 'Продолжить';
    actionBtn.disabled = true;
    optionsEl.querySelectorAll('input').forEach(inp => inp.addEventListener('change', ()=> {
      actionBtn.disabled = optionsEl.querySelectorAll('input:checked').length === 0;
    }));
  } else {
    actionBtn.textContent = (currentIndex===order.length-1 && mode==='single') ? 'Завершить' : 'Следующий';
    actionBtn.disabled = true;
  }

  prevBtn.disabled = currentIndex===0;

  // IMPORTANT: do not hide bottom while bottomActive===true
  // If autoprogress is turned off, hide immediately
  if (!(autoSkipEl && autoSkipEl.checked) && !bottomActive){
    // autoprogress disabled and not actively filling -> keep hidden
    bottomCell.style.display = 'none';
    bottomFill.style.width = '0%';
    bottomLabel.textContent = '0%';
  }
}

/* ====== EVALUATION ====== */
function evaluateSingle(qidx, chosenOrig){
  const q = questions[qidx];
  const correct = q.correctAnswers.includes(chosenOrig);

  optionsEl.querySelectorAll('.option').forEach(label=>{
    label.style.pointerEvents='none';
    const orig = Number(label.querySelector('input').dataset.orig);
    label.classList.remove('correct','incorrect','selected');
    if (q.correctAnswers.includes(orig)) label.classList.add('correct');
    if (orig === chosenOrig && !correct) label.classList.add('incorrect');
    if (orig === chosenOrig) label.classList.add('selected');
  });

  feedbackEl.textContent = correct ? '✓ Правильно' : '✗ Неправильно';
  feedbackEl.className = 'feedback ' + (correct ? 'correct' : 'incorrect');
  feedbackEl.style.display = 'block';
  if (q.explanation){ explainEl.textContent = q.explanation; explainEl.style.display = 'block'; }

  if (correct) score++;
  answered = true;
  actionBtn.disabled = false;

  if (autoSkipEl && autoSkipEl.checked){
    startBottomFill(3000);
  } else {
    // ensure hidden if autoprogress off
    if (!bottomActive) stopBottomFill();
  }
}

function evaluateMulti(qidx){
  const q = questions[qidx];
  const chosen = Array.from(optionsEl.querySelectorAll('input:checked')).map(i=>Number(i.dataset.orig)).sort((a,b)=>a-b);
  userSelections[qidx] = chosen.slice();
  const corr = q.correctAnswers.slice().sort((a,b)=>a-b);
  const full = JSON.stringify(chosen) === JSON.stringify(corr);

  optionsEl.querySelectorAll('.option').forEach(label=>{
    label.style.pointerEvents='none';
    const orig = Number(label.querySelector('input').dataset.orig);
    label.classList.remove('correct','incorrect','selected');
    if (corr.includes(orig)) label.classList.add('correct');
    if (chosen.includes(orig) && !corr.includes(orig)) label.classList.add('incorrect');
    if (chosen.includes(orig)) label.classList.add('selected');
  });

  feedbackEl.textContent = full ? '✓ Полностью правильно' : '✗ Неправильно';
  feedbackEl.className = 'feedback ' + (full ? 'correct' : 'incorrect');
  feedbackEl.style.display = 'block';
  if (q.explanation){ explainEl.textContent = q.explanation; explainEl.style.display = 'block'; }

  if (full) score++;
  answered = true;
  actionBtn.disabled = false;

  if (autoSkipEl && autoSkipEl.checked){
    startBottomFill(4500);
  } else {
    if (!bottomActive) stopBottomFill();
  }
}

/* ====== CENTRAL PROCEED: manual or auto ====== */
function proceedToNext(isAuto){
  if (!isAuto){
    // manual: cancel active bottom if it is filling
    if (bottomActive) cancelBottomIfRunning();
  } else {
    // isAuto: called only once when bottom finishes filling — bottomActive should already be false
    // don't cancel/hide bottom here
  }

  if (currentIndex >= order.length) return;
  const qidx = order[currentIndex];
  const q = questions[qidx];

  // if multi and not yet evaluated -> evaluate
  if (isMulti(q) && !answered){
    evaluateMulti(qidx);
    return;
  }
  if (!isMulti(q) && !answered) return;

  // check correctness
  let wasCorrect = false;
  if (isMulti(q)){
    const chosen = (userSelections[qidx] || []).slice().sort((a,b)=>a-b);
    const corr = q.correctAnswers.slice().sort((a,b)=>a-b);
    wasCorrect = JSON.stringify(chosen) === JSON.stringify(corr);
  } else {
    wasCorrect = q.correctAnswers.includes((userSelections[qidx] || [])[0]);
  }

  if (mode === 'mastery' && !wasCorrect){
    const gap = Math.floor(Math.random()*3)+5;
    const insertPos = Math.min(currentIndex + gap, order.length);
    order.splice(insertPos, 0, qidx);
  }

  currentIndex++;

  if (currentIndex >= order.length){ showResults(); return; }
  renderCurrent();
}

/* ========== UI wiring ========== */
actionBtn.addEventListener('click', ()=> proceedToNext(false));
prevBtn.addEventListener('click', ()=> { if (bottomActive) cancelBottomIfRunning(); if (currentIndex>0){ currentIndex--; renderCurrent(); } });

if (autoSkipEl){
  autoSkipEl.addEventListener('change', ()=>{
    // if toggled off while filling — stop immediately and hide
    if (!autoSkipEl.checked && bottomActive){
      stopBottomFill();
    }
    // if toggled on we do nothing; next evaluation will start the bar
  });
}

if (singleBtn) singleBtn.addEventListener('click', ()=> startSession('single'));
if (masteryBtn) masteryBtn.addEventListener('click', ()=> startSession('mastery'));
if (restartBtn) restartBtn.addEventListener('click', ()=> { if (startModal) startModal.style.display = 'flex'; resultsEl.style.display = 'none'; document.querySelector('.card').style.display = 'block'; });

function showResults(){
  document.querySelector('.card').style.display = 'none';
  resultsEl.style.display = 'block';
  finalScore.textContent = `${score} / ${questions.length}`;
  const pct = Math.round(score / questions.length * 100);
  resultMessage.textContent = pct >= 90 ? 'Отличный результат! 🎉' : pct >= 70 ? 'Хороший результат! 👍' : pct >= 50 ? 'Удовлетворительно. 📚' : 'Нужно поработать. 💪';
}

if (themeBtn) themeBtn.addEventListener('click', ()=> document.documentElement.classList.toggle('light'));
document.addEventListener('keydown', (e)=>{ if (e.key === 'Enter') proceedToNext(false); });

/* initial */
if (startModal) startModal.style.display = 'flex';
</script>
</body>
</html>
